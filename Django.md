# Django

## ê°œìš”

### Djangoë€?

- íŒŒì´ì¬ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- ì›¹ì‚¬ì´íŠ¸ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” êµ¬ì„±ìš”ì†Œë¡œ ì´ë£¨ì–´ì§

### Djangoì˜ íŠ¹ì§•

- **MVC íŒ¨í„´ ê¸°ë°˜ MVT(Model-View-Controller)**
    - ì¥ê³ ì—ì„œëŠ” Viewë¥¼ Template, Controllerë¥¼ Viewë¼ê³  ë¶€ë¥¸ë‹¤.
    - Model : ë°ì´í„°ë² ì´ìŠ¤ì— ì—‘ì„¸ìŠ¤í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
    - View : ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ë³€í˜•í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
    - Template :  ë°ì´í„°ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸
    
- **ê°ì²´ ê´€ê³„ ë§¤í•‘(ORM, Object-Realational Mapping)**
    - ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œê³¼ ëª¨ë¸ì´ë¼ëŠ” íŒŒì´ì¬ í´ë˜ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ë‹¤ë¦¬ì™€ ê°™ì€ ì—­í• 
    - SQL ë¬¸ì¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ í…Œì´ë¸”ì„ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.
    
- **ìš°ì•„í•œ URL ì„¤ê³„**
    - URLì„ ì§ê´€ì ì´ê³  ì‰½ê²Œ í‘œí˜„
    - ì •ê·œí‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë³µì¡í•œ URLë„ í‘œí˜„
    - ê° URL í˜•íƒœë¥¼ íŒŒì´ì¬ í•¨ìˆ˜ì— 1:1ë¡œ ì—°ê²°í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì–´ ì´í•´í•˜ê¸° ì‰¬ìš´ ì½”ë“œ ì‘ì„±ê³¼ í¸ë¦¬í•œ ê°œë°œì´ ê°€ëŠ¥
    
- **ìì²´ í…œí”Œë¦¿ ì‹œìŠ¤í…œ**
    - ë‚´ë¶€ì ìœ¼ë¡œ í™•ì¥ì´ ê°€ëŠ¥í•˜ê³  ë””ìì¸í•˜ê¸° ì‰¬ìš´ ê°•ë ¥í•œ í…œí”Œë¦¿ ì‹œìŠ¤í…œ
    - í™”ë©´ ë””ìì¸ê³¼ ë¡œì§ì— ê´€í•œ ì½”ë”©ì„ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë° ê°€ëŠ¥
    - HTMLê³¼ ê°™ì€ í…ìŠ¤íŠ¸í˜• ì–¸ì–´ë¥¼ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆìŒ
    
- **ìºì‹œ ì‹œìŠ¤í…œ**
    - ë™ì  í˜ì´ì§€ ìƒì„±ì„ ìœ„í•œ ì‘ì—…ì€ ì„œë²„ì— ì—„ì²­ë‚œ ë¶€í•˜ë¥¼ ì¤Œ â†’ ì¥ê³ ì˜ ìºì‹œ ì‹œìŠ¤í…œì€ ìºì‹œìš© ë©”ëª¨ë¦¬, ë°ì´í„°ë² ì´ìŠ¤ ë‚´ë¶€, íŒŒì¼ ì‹œìŠ¤í…œ ì¤‘ ì•„ë¬´ ê³³ì—ë‚˜ ì €ì¥ ê°€ëŠ¥
    - ìºì‹œ ë‹¨ìœ„ë¥¼ í˜ì´ì§€ì—ì„œë¶€í„° ì‚¬ì´íŠ¸ ì „ì²´ ë˜ëŠ” íŠ¹ì • ë·°ì˜ ê²°ê³¼, í…œí”Œë¦¿ì˜ ì¼ë¶€ ì˜ì—­ë§Œì„ ì§€ì •í•˜ì—¬ ì €ì¥ ê°€ëŠ¥
    
- **ë‹¤êµ­ì–´ ì§€ì›**
    - ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¤ë¥¸ ë‚˜ë¼ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í…ìŠ¤íŠ¸ ë²ˆì—­, ë‚ ì§œ/ì‹œê°„/ìˆ«ì í¬ë§·, íƒ€ì„ì¡´ ì§€ì • ë“±ê³¼ ê°™ì€ ë‹¤êµ­ì–´ í™˜ê²½ì„ ì œê³µ
    
- **í’ë¶€í•œ ê°œë°œ í™˜ê²½**
    - ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¤ë¥¸ ë‚˜ë¼ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í…ìŠ¤íŠ¸ ë²ˆì—­, ë‚ ì§œ/ì‹œê°„/ìˆ«ì í¬ë§·, íƒ€ì„ì¡´ ì§€ì • ë“±ê³¼ ê°™ì€ ë‹¤êµ­ì–´ í™˜ê²½ì„ ì œê³µ
    
- **ì†ŒìŠ¤ ë³€ê²½ ì‚¬í•­ ìë™ ë°˜ì˜**
    - ì¥ê³ ëŠ” *.py íŒŒì¼ì˜ ë³€ê²½ ì—¬ë¶€ë¥¼ ê°ì‹œí•˜ê³  ìˆë‹¤ê°€ íŒŒì¼ì´ ë³€ê²½ë˜ë©´ ì‹¤í–‰ íŒŒì¼ì— ë³€ê²½ ë‚´ì—­ì„ ë°”ë¡œ ë°˜ì˜
    - í…ŒìŠ¤íŠ¸ìš© ì›¹ ì„œë²„ë¥¼ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ ì†ŒìŠ¤ íŒŒì¼ì„ ìˆ˜ì •í•˜ë”ë¼ë„ ì›¹ ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•  í•„ìš” ì—†ì´ ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ íŒŒì¼ì´ ë°˜ì˜ë¨

### ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë°©ì‹

- **MVT ì½”ë”© ìˆœì„œ**
    - í”„ë¡œì íŠ¸ ë¼ˆëŒ€ ë§Œë“¤ê¸° : í”„ë¡œì íŠ¸ ë° ì•± ê°œë°œì—  í•„ìš”í•œ ë””ë ‰í† ë¦¬ì™€ íŒŒì¼ ìƒì„±
    - ëª¨ë¸ ì½”ë”©í•˜ê¸° : í…Œì´ë¸” ê´€ë ¨ ì‚¬í•­ì„ ê°œë°œ(model.py, [admin.py](http://admin.py) íŒŒì¼)
    - URLconf ì½”ë”©í•˜ê¸° : URL ë° ë·° ë§¤í•‘ ê´€ê³„ë¥¼ ì •ì˜(urls.py íŒŒì¼)
    - í…œí”Œë¦¿ ì½”ë”©í•˜ê¸° : í™”ë©´ UI ê°œë°œ (templates/ ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ *.html íŒŒì¼ë“¤)
    - ë·° ì½”ë”©í•˜ê¸° : ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ ê°œë°œ (views.py íŒŒì¼)

## ì„¤ë¬¸ ì–´í”Œë¦¬ì¼€ì´ì…˜

### ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„¤ê³„

- index.html : ìµœê·¼ì— ì‹¤ì‹œí•˜ê³  ìˆëŠ” ì§ˆë¬¸ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤Œ.
- detail.html : í•˜ë‚˜ì˜ ì§ˆë¬¸ì— ëŒ€í•´ íˆ¬í‘œí•  ìˆ˜ ìˆë„ë¡ ë‹µë³€ í•­ëª©ì„ í¼ìœ¼ë¡œ ë³´ì—¬ì¤Œ
- result.html : ì§ˆë¬¸ì— ë”°ë¥¸ íˆ¬í‘œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤Œ

![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled.png)

### **í…Œì´ë¸” ì„¤ê³„**

- **Question í…Œì´ë¸” ì„¤ê³„**
    
    
    | ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ ì¡°ê±´ | ì„¤ëª… |
    | --- | --- | --- | --- |
    | id | integer | NotNull, PK
    AutoIncrement | Primary Key |
    | question_text | varchar(200) | NotNull | ì§ˆë¬¸ ë¬¸ì¥ |
    | pub_date | datetime | NotNull | ì§ˆë¬¸ ìƒì„± ì‹œê° |
- **Choice í…Œì´ë¸” ì„¤ê³„**
    
    
    | ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ ì¡°ê±´ | ì„¤ëª… |
    | --- | --- | --- | --- |
    | id | integer | NotNull, PK
    AutoIncrement | Primary Key |
    | choice_text | varchar(200) | NotNull | ë‹µë³€ í•­ëª© ë¬¸êµ¬ |
    | votes | integer | NotNull | íˆ¬í‘œ ì¹´ìš´íŠ¸ |
    | question | integer | NotNull, FK(Question id),
    Index | Foreign Key |

### í”„ë¡œì íŠ¸ ë¼ˆëŒ€ ë§Œë“¤ê¸°

- **í”„ë¡œì íŠ¸ ë¼ˆëŒ€ & ë””ë ‰í† ë¦¬ í•­ëª©**
    
    ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%201.png)
    
    ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%202.png)
    
    ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%203.png)
    
- **í”„ë¡œì íŠ¸ ë¼ˆëŒ€ ë§Œë“¤ê¸° ìˆœì„œ**
    1. django-admin startproject mysite : mysite í”„ë¡œì íŠ¸ ìƒì„±
    2. python [manage.py](http://manage.py) startapp polls : pollsë¼ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
    3. notepad [setting.py](http://setting.py) : ì„¤ì • íŒŒì¼ì„ í™•ì¸ ë° ìˆ˜ì •
    4. python [manage.py](http://manage.py) migrate : ë°ì´í„°ë² ì´ìŠ¤ì— ê¸°ë³¸ í…Œì´ë¸” ìƒì„±
    5. python [manage.py](http://manage.py) runserver : í˜„ì¬ê¹Œì§€ ì‘ì—…ì„ ê°œë°œìš© ì›¹ ì„œë²„ë¡œ í™•ì¸
    
- **í”„ë¡œì íŠ¸ ìƒì„±**
    - ìµœìƒìœ„ ë””ë ‰í† ë¦¬ ë°‘ì— ìƒì„±
        
        ```powershell
        (base) **C:\MyTest>**django-admin startproject mysite
        ```
        
    - mystie â†’ projectsiteë¡œ ì´ë¦„ ë³€ê²½
        
        ```powershell
        (base) **C:\MyTest>**move mysite projectsite
        ```
        
- **ì–´í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±**
    - í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ projectsite ë””ë ‰í† ë¦¬ë¡œ ì´ë™
        
        ```powershell
        (base) **C:\MyTest> cd \**
        (base) **C:\MyTest> cd projectsite**
        ```
        
    - ì–´í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
        
        ```powershell
        **(base) C:\MyTest\projectsite>**python manage.py startapp polls
        ```
        
    - í™•ì¸
        
        ```powershell
        (base) C:\MyTest\projectsite>cd polls
        (base) **C:\MyTest\projectsite\polls>**dir
        ```
        
- **í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ ë³€ê²½**
    - í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ì„¤ì • ê°’ë“¤ì„ [settings.py](http://settings.py) íŒŒì¼ì— ì§€ì •
    - ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ í¬í•¨í•œ ê°ì¢… ë””ë ‰í† ë¦¬ ìœ„ì¹˜, ë¡œê·¸ í˜•ì‹, ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ ë“±ì´ ì§€ì •ë˜ì–´ ìˆìŒ.
    - [setting.py](http://setting.py) íŒŒì¼ ìˆ˜ì •
        
        ```powershell
        (base) C:\MyTest>\projectstie>notepad setting.py
        ```
        
        <aside>
        ğŸ’¡ notepad [setting.py](http://setting.py) ì…ë ¥í•´ì„œ ìˆ˜ì •í•´ë„ ë˜ê³  íŒŒì¼íƒìƒ‰ê¸°ë¥¼ í†µí•´ ì§ì ‘ íŒŒì¼ì„ ì—´ì–´ ìˆ˜ì •í•´ë„ ë¨.
        
        </aside>
        
    - ìˆ˜ì • ë‚´ìš©
        - ALLOWED_HOSTS í•­ëª©ì„ ì ì ˆí•˜ê²Œ ì§€ì •
            
            ALLOWED_HOSTS = ['192.168.35.61', 'localhost', '127.0.0.1â€™]
            (ì´ˆê¸°ê°’ì€ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ëª¨ë“  ì‚¬ëŒì´ ì ‘ê·¼ ê°€ëŠ¥)
            
        - ì–´í”Œë¦¬ì¼€ì´ì…˜ë“¤ì€ ëª¨ë‘ ì„¤ì • íŒŒì¼ì— ë“±ë¡
            
            INSTALLED_APPS =[ ~, 'polls.apps.PollsConfigâ€™, ]
            
        - í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„
            
            ë””í´íŠ¸ë¡œ SQLite3 ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìŒ.
            
        - íƒ€ì„ì¡´ ì§€ì •
            
            TIME_ZONE = 'Asia/Seoulâ€™
            
            UTCë¡œ ë””í´íŠ¸ ì„¤ì • ë˜ì–´ ìˆìŒ
            
- **ê¸°ë³¸ í…Œì´ë¸” ìƒì„±**
    - ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œ ë°˜ì˜í•´ì£¼ëŠ” ëª…ë ¹ ì‹¤í–‰
        
        ```powershell
        (base) **C:\MyTest\projectsite>**python manage.py migrate
        ```
        
- **ì‘ì—… í™•ì¸í•˜ê¸°**
    - í™•ì¸ì„ ìœ„í•´ì„œ ì›¹ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³ , ê·¸ ì›¹ ì„œë²„ì— ì ‘ì†
    
    ```powershell
    (base) **C:\MyTest\projectsite>**python manage.py runserver 127.0.0.1:8000
    (base) C:\MyTest\projectsite>python manage.py runserver
    (base) C:\MyTest\projectsite>python manage.py runserver 0:8000
    ```
    
    - ì›¹ ë¸Œë¼ìš°ì € ì—´ê³  IP ì£¼ì†Œ ì…ë ¥
- **Admin ì‚¬ì´íŠ¸ ì ‘ì†**
    - ì£¼ì†Œ ê²€ìƒ‰ì°½ì— IP ì£¼ì†Œ/admin ì…ë ¥
    [http://127.0.0.1:8000/admin](http://127.0.0.1:8000/admin)
    - username, password ìƒì„± (superuser ìƒì„±)
        
        ```powershell
        (base) **C:\MyTest\projectsite>**python manage.py createsuperuser
        ```
        
    - ë‹¤ì‹œ admin ì‚¬ì´íŠ¸ ì ‘ì†í•´ì„œ ë¡œê·¸ì¸
    
- **í…Œì´ë¸” ì‘ì„± ì‘ì—…**
    - ìƒˆë¡­ê²Œ ë§Œë“¤ í…Œì´ë¸”ì— ëŒ€í•œ ë°ì´í„°ì˜ ì…ë ¥, ë³€ê²½, ì‚­ì œ ë“±ì˜ ì‘ì—…
    
- **ê³¨ê²© ìƒì„±**
    
    ```powershell
    (base) C:\MyTest>tree /F projectsite
    ```
    

### Model ì½”ë”©

- Model ì½”ë”© : ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ì„ ìƒì„±í•˜ëŠ” ì‘ì—…

```powershell
>notepad models.py // í…Œì´ë¸”ì„ ì •ì˜í•¨
>notepad admins.py // ì •ì˜ëœ í…Œì´ë¸”ì´ Admin í™”ë©´ì— ë³´ì´ê²Œ í•¨
>python manage.py makemigrations // ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì´ í•„ìš”
í•œ ì‚¬í•­ì„ ì¶”ì¶œí•¨
>python manage.py migrate // ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•¨
>python manage.py runserver // í˜„ì¬ê¹Œì§€ ì‘ì—…ì„ ê°œë°œìš© ì›¹ ì„œë²„ë¡œ
í™•ì¸í•¨
```

- **í…Œì´ë¸” ì •ì˜**
    - polls ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ Questionê³¼ Choice ë‘ ê°œì˜ í…Œì´ë¸”ì´ í•„ìš”
        
        
        | ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ ì¡°ê±´ | ì„¤ëª… |
        | --- | --- | --- | --- |
        | id | integer | NotNull, PK
        AutoIncrement | Primary Key |
        | question_text | varchar(200) | NotNull | ì§ˆë¬¸ ë¬¸ì¥ |
        | pub_date | datetime | NotNull | ì§ˆë¬¸ ìƒì„± ì‹œê° |
        
        | ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ ì¡°ê±´ | ì„¤ëª… |
        | --- | --- | --- | --- |
        | id | integer | NotNull, PK
        AutoIncrement | Primary Key |
        | choice_text | varchar(200) | NotNull | ë‹µë³€ í•­ëª© ë¬¸êµ¬ |
        | votes | integer | NotNull | íˆ¬í‘œ ì¹´ìš´íŠ¸ |
        | question | integer | NotNull, FK(Question id),
        Index | Foreign Key |
    - í…Œì´ë¸”ì€ [models.py](http://models.py) íŒŒì¼ì— ì •ì˜
        
        ```python
        from django.db import models
        
        # Create your models here.
        
        class Question(models.Model):
            question_text = models.CharField(max_length=200)
            pub_date = models.DateTimeField('date published')
        
            def __str__(self):
                return self.question_text
        
        class Choice(models.Model):
            question = models.ForeignKey(Question, on_delete=models.CASCADE)
            choice_text = models.CharField(max_length=200)
            votes = models.IntegerField(default=0)
        
            def __str__(self):
                return self.choice_text
        ```
        
- **admin ì‚¬ì´íŠ¸ì— í…Œì´ë¸” ë°˜ì˜**
    - [admin.py](http://admin.py) íŒŒì¼ì— í…Œì´ë¸” ë“±ë¡
        
        ```python
        from django.contrib import admin
        
        # Register your models here.
        
        from polls.models import Question, Choice
        
        admin.site.register(Question)
        admin.site.register(Choice)
        ```
        
        <aside>
        ğŸ’¡ [models.py](http://models.py/) ëª¨ë“ˆì—ì„œ ì •ì˜í•œ Question, Choice í´ë˜ìŠ¤ë¥¼ ì„í¬íŠ¸ í•˜ê³ , admin.site.register() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„í¬íŠ¸ í•œ í´ë˜ìŠ¤ë¥¼ Admin ì‚¬ì´íŠ¸ì— ë“±ë¡
        
        </aside>
        
- **ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ì‚¬í•­ ë°˜ì˜**
    - í…Œì´ë¸”ì˜ ì‹ ê·œ ìƒì„±, í…Œì´ë¸”ì˜ ì •ì˜ ë³€ê²½ ë“± ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì´ í•„ìš”í•œ ì‚¬í•­ì´ ìˆìœ¼ë©´, ì´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì‹¤ì œë¡œ ë°˜ì˜í•´ì£¼ëŠ” ì‘ì—…
        
        ```powershell
        (base) C:\MyTest\projectsite>python manage.py makemigrations
        ```
        
        <aside>
        ğŸ’¡ polls/migrations ë””ë ‰í† ë¦¬ í•˜ìœ„ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤ì´ ìƒê¹€
        
        </aside>
        
    - migrate ëª…ë ¹ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ì„ ìƒì„±
        
        ```powershell
        (base) C:\MyTest\projectsite>python manage.py migrate
        ```
        
- **ì‘ì—… í™•ì¸**
    - runserver ìš©ìœ¼ë¡œ ë³„ë„ì˜ cmdì°½ì„ ì—´ì–´ ì‚¬ìš©
        
        ```powershell
        (base) C:\MyTest\projectsite>python manage.py runserver 127.0.0.1:8000
        (base) C:\MyTest\projectsite>python manage.py runserver
        (base) C:\MyTest\projectsite>python manage.py runserver 0:8000
        ```
        
    - Admin ì‚¬ì´íŠ¸ì— ì ‘ì†

### View ë° Template

- **ì²˜ë¦¬ íë¦„ ì„¤ê³„**
    - ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” í˜ì´ì§€ê°€ 3ê°œì´ë¯€ë¡œ, 3ê°œì˜ í…œí”Œë¦¿ íŒŒì¼ì´ í•„ìš”
        
        ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%204.png)
        
    - URL/ë·° ë§¤í•‘ì„ URLconf ë¼ê³  í•˜ë©° [urls.py](http://urls.py/) íŒŒì¼ì— ì‘ì„±
        
        ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%205.png)
        
    - URLconfë¥¼ ë¨¼ì € ì½”ë”©í•œ í›„ì— ë·°, í…œí”Œë¦¿ ë˜ëŠ” í…œí”Œë¦¿, ë·° ìˆœì„œë¡œ ì½”ë”©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
    
- **URLconf ì½”ë”©**
    - [urls.py](http://urls.py/)(C:\MyTest\projectsite\mysite) íŒŒì¼ì— ì½”ë”©
        
        ```python
        """mysite URL Configuration
        
        The `urlpatterns` list routes URLs to views. For more information please see:
            https://docs.djangoproject.com/en/2.0/topics/http/urls/
        Examples:
        Function views
            1. Add an import:  from my_app import views
            2. Add a URL to urlpatterns:  path('', views.home, name='home')
        Class-based views
            1. Add an import:  from other_app.views import Home
            2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
        Including another URLconf
            1. Import the include() function: from django.urls import include, path
            2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
        """
        from django.contrib import admin
        from django.urls import path, **include**
        
        urlpatterns = [
            path('admin/', admin.site.urls),
        
            **# ìˆ˜ì •
            path('polls/', include('polls.urls')),**
        ]
        ```
        
    - [urls.py](http://urls.py/)(C:\MyTest\projectsite\mysite\polls) íŒŒì¼ì— ì½”ë”©
        
        ```python
        from django.urls import path
        from polls import views
        
        app_name = 'polls'
        urlpatterns = [
            path('', views.index, name='index'),      # /polls/
            path('<int:question_id>/', views.detail, name='detail'),       # /polls/5/
            path('<int:question_id>/results/', views.results, name='results'),     # /polls/5/results/
            path('<int:question_id>/vote/', views.vote, name='vote'),      # /polls/5/vote/
        ]
        ```
        
- **ë·° í•¨ìˆ˜ index() ë° í…œí”Œë¦¿ ì‘ì„±**
    
    ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%206.png)
    
    - ìœ„ ë‚´ìš©ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿ íŒŒì¼ index.html ì‘ì„±
        
        ```html
        {% if latest_question_list %}
            <ul>
            {% for question in latest_question_list %}
                <li><a href="/polls/{{ question.id }}/">{{ question.question_text }}</a></li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No polls are available.</p>
        {% endif %}
        ```
        
    - pollls\views.pyì— index() í•¨ìˆ˜ ì‘ì„±
        
        ```python
        from django.shortcuts import get_object_or_404, render
        from django.http import HttpResponseRedirect
        from django.urls import reverse
        
        from polls.models import Choice, Question
        
        def index(request):
            latest_question_list = Question.objects.all().order_by('-pub_date')[:5]
            context = {'latest_question_list': latest_question_list}
            return render(request, 'polls/index.html', context)
        ```
        
    
- **ë·° í•¨ìˆ˜ detail() ë° í…œí”Œë¦¿ ì‘ì„±**
    
    ![Untitled](Django%203e0e4d0a282a45eda547baf9e46a739c/Untitled%207.png)
    
    - 3ê°œì˜ ì§ˆë¬¸(index.html) ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí–ˆì„ ë•Œ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ í•­ëª©ì„ ë³´ì—¬ì£¼ëŠ” í™”ë©´ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿ íŒŒì¼ detail.html ì‘ì„±
        
        ```html
        <h1>{{ question.question_text }}</h1>
        
        {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
        
        <form action="{% url 'polls:vote' question.id %}" method="post">
        {% csrf_token %}
        {% for choice in question.choice_set.all %}
            <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
            <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
        {% endfor %}
        <input type="submit" value="Vote" />
        </form>
        ```
        
    - pollls\views.pyì— detail() í•¨ìˆ˜ ì‘ì„±
        
        ```python
        def detail(request, question_id):
            question = get_object_or_404(Question, pk=question_id)
            return render(request, 'polls/detail.html', {'question': question})
        ```
        
- **ë·° í•¨ìˆ˜ vote() ë° ë¦¬ë‹¤ì´ë ‰ì…˜ ì‘ì„±**
    - vote() ë·° í•¨ìˆ˜ì˜ í˜¸ì¶œê³¼ ì—°ê³„ëœ URLì€ detail.html í…œí”Œë¦¿ íŒŒì¼ì—ì„œ
    ë°›ìŒ
    - views.pyíŒŒì¼ì„ ì—´ê³  vote() ë·° í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
        
        ```python
        def vote(request, question_id):
            question = get_object_or_404(Question, pk=question_id)
            try:
                selected_choice = question.choice_set.get(pk=request.POST['choice'])
            except (KeyError, Choice.DoesNotExist):
                # Redisplay the question voting form.
                return render(request, 'polls/detail.html', {
                    'question': question,
                    'error_message': "You didn't select a choice.",
                })
            else:
                selected_choice.votes += 1
                selected_choice.save()
                # Always return an HttpResponseRedirect after successfully dealing
                # with POST data. This prevents data from being posted twice if a
                # user hits the Back button.
                return HttpResponseRedirect(reverse('polls:results', args=(question.id,)))
        ```
        
- **ë·° í•¨ìˆ˜ results() ë° ë¦¬ë‹¤ì´ë ‰ì…˜ ì‘ì„±**
    - results()ë·° í•¨ìˆ˜ì˜ í˜¸ì¶œê³¼ ì—°ê³„ëœ URLì€ votes() ë·° í•¨ìˆ˜ì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²°ê³¼
    - ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œ í›„ì— ê·¸ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì¼œì£¼ê¸° ìœ„í•´ votes() ë·° í•¨ìˆ˜ì— ì‹¤í–‰
    - [views.py](http://views.py/) íŒŒì¼ì„ ì—´ê³  results() ë·° í•¨ìˆ˜ì˜ ë‚´ìš©ì„ ì¶”ê°€
        
        ```python
        def results(request, question_id):
            question = get_object_or_404(Question, pk=question_id)
            return render(request, 'polls/results.html', {'question': question})
        ```
        
    - í…œí”Œë¦¿ íŒŒì¼ results.html ì‘ì„±
        
        ```html
        <h1>{{ question.question_text }}</h1>
        
        <ul>
        {% for choice in question.choice_set.all %}
            <li>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
        {% endfor %}
        </ul>
        
        <a href="{% url 'polls:detail' question.id %}">Vote again?</a>
        ```
        
- **ì‘ì—… í™•ì¸í•˜ê¸°**
    
    ```powershell
    (base) C:\MyTest\projectsite>python manage.py runserver 127.0.0.1:8000
    (base) C:\MyTest\projectsite>python manage.py runserver
    (base) C:\MyTest\projectsite>python manage.py runserver 0:8000
    ```
    
    - ì›¹ë¸Œë¼ìš°ì €ì—ì„œ [http://127.0.0.1:8000/admin](http://127.0.0.1:8000/admin)
        - Questions ë°ì´í„° ì…ë ¥
        - Choices ë°ì´í„° ì…ë ¥
    - ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸
        
        [http://127.0.0.1:8000/polls](http://127.0.0.1:8000/polls)